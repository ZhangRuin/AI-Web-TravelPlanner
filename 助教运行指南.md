# 助教运行指南

## API Key 配置  

```
阿里云百炼平台 API Key
langchain4j:
  open-ai:
    chat-model:
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
      api-key: sk-9c6ab971cdf745ba88016f1ff9a161e7
      model-name: qwen-flash
      
高德地图 API Key
amap:
  key: e99dd91dd2b26b83aba04ab7544f0033
```

**以上API KEY 已经在项目里配置好，直接快速启动即可，无需配置环境变量(backend\src\main\resources\application.yml)**

## **快速启动步骤**

### 方法一（推荐，本地测试过）

在项目根目录（包含docker-compose.yml的目录）执行

```bash
# 一键启动所有服务（推荐）
docker-compose up --build
```

### 方法二

使用预构建的Docker镜像启动

1. **修改docker-compose.yml文件**：

   ```yaml
   services:
     backend:
       image: 211840188kunbadanzi/webai-backend:latest  # 使用预构建镜像
       # 注释掉或删除 build: ./backend
     
     frontend:
       image: 211840188kunbadanzi/webai-frontend:latest  # 使用预构建镜像
       # 注释掉或删除 build: ./frontend
   ```

2. **直接启动服务**：

   ```bash
   # 使用预构建镜像启动（无需构建）
   docker-compose up
   ```

3. **镜像下载地址**：

   - 后端镜像：https://hub.docker.com/r/211840188kunbadanzi/webai-backend
   - 前端镜像：https://hub.docker.com/r/211840188kunbadanzi/webai-frontend

## 服务访问地址

| 服务名称 | 访问地址 | 端口 | 说明 |
|---------|---------|------|------|
| 前端应用 | http://localhost:5173 | 5173 | Vue.js用户界面 |
| 后端API | http://localhost:8081 | 8081 | Spring Boot REST API |
| 数据库 | localhost:3307 | 3307 | MySQL数据库 |

## 功能测试指南

### 前端

1. **访问前端界面**
   - 打开浏览器访问：http://localhost:5173
   - 检查页面是否能正常加载
   - 验证响应式布局是否正常

2. **基础功能测试**
   - 检查导航菜单是否正常
   - 测试页面路由切换
   - 验证UI组件交互

### 后端

```bash
http://localhost:8081
```

### 数据库连接测试

```bash
# 进入MySQL容器
docker exec -it ai-travel-mysql mysql -u root -p

# 密码在docker-compose.yml中配置
# 查看数据库
docker exec -it ai-travel-mysql mysql -u root -p -e "SHOW DATABASES;"
```

## 常见问题排查

### 问题1：端口冲突

**症状**：服务启动失败，提示端口已被占用

**解决方案**：
```bash
# 检查端口占用
netstat -ano | findstr :5173
netstat -ano | findstr :8081
netstat -ano | findstr :3307

# 停止占用端口的进程或修改docker-compose.yml中的端口映射
```

### 问题2：Docker镜像构建失败

**症状**：`docker-compose up --build` 构建失败

**解决方案**：
```bash
# 清理Docker缓存
docker system prune -a

# 重新构建
docker-compose build --no-cache
```

### 问题3：服务启动顺序问题

**症状**：前端服务启动失败，依赖后端服务

**解决方案**：
```bash
# 先启动后端和数据库
docker-compose up -d mysql backend

# 等待后端健康检查通过后启动前端
docker-compose up -d frontend
```

## 项目结构说明

### 关键文件说明

| 文件路径 | 作用 | 说明 |
|---------|------|------|
| `docker-compose.yml` | 服务编排 | 定义所有服务的配置和依赖关系 |
| `backend/Dockerfile` | 后端镜像构建 | Spring Boot应用的Docker配置 |
| `frontend/Dockerfile` | 前端镜像构建 | Vue.js应用的Docker配置 |
| `frontend/nginx.conf` | Nginx配置 | 前端静态文件服务和API代理 |

### 服务配置说明

- **MySQL服务**：使用官方MySQL 8.0镜像，数据持久化到本地卷
- **后端服务**：基于OpenJDK 17构建，暴露8081端口
- **前端服务**：基于Node.js构建，使用Nginx作为Web服务器

